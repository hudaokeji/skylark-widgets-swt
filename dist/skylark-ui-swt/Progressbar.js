/**
 * skylark-ui-swt - The skylark widget framework and standard widgets
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-swt/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/query","./ui","./Widget"],function(t,e,a,s,n,i,r,o){"use strict";var d=r.Progressbar=o.inherit({klassName:"Progressbar",pluginName:"lark.progressbar",options:{transition_delay:300,refresh_speed:50,display_text:"none",use_percentage:!0,percent_format:function(t){return t+"%"},amount_format:function(t,e,a){return t+" / "+e},update:i.noop,done:i.noop,fail:i.noop},_construt:function(t,e){this.$element=i(t),this.options=i.extend({},d.defaults,e)},transition:function(){var t=this.$element,e=t.parent(),a=this.$back_text,s=this.$front_text,n=this.options,r=parseInt(t.attr("data-transitiongoal")),o=parseInt(t.attr("aria-valuemin"))||0,l=parseInt(t.attr("aria-valuemax"))||100,h=e.hasClass("vertical"),u=n.update&&"function"==typeof n.update?n.update:d.defaults.update,p=n.done&&"function"==typeof n.done?n.done:d.defaults.done,c=n.fail&&"function"==typeof n.fail?n.fail:d.defaults.fail;if(isNaN(r))return void c("data-transitiongoal not set");var f=Math.round(100*(r-o)/(l-o));if("center"===n.display_text&&!a&&!s){this.$back_text=a=i("<span>").addClass("progressbar-back-text").prependTo(e),this.$front_text=s=i("<span>").addClass("progressbar-front-text").prependTo(t);var g;h?(g=e.css("height"),a.css({height:g,"line-height":g}),s.css({height:g,"line-height":g}),i(window).resize(function(){g=e.css("height"),a.css({height:g,"line-height":g}),s.css({height:g,"line-height":g})})):(g=e.css("width"),s.css({width:g}),i(window).resize(function(){g=e.css("width"),s.css({width:g})}))}setTimeout(function(){var i,d,c,g,_;h?t.css("height",f+"%"):t.css("width",f+"%");var m=setInterval(function(){h?(c=t.height(),g=e.height()):(c=t.width(),g=e.width()),i=Math.round(100*c/g),d=Math.round(o+c/g*(l-o)),i>=f&&(i=f,d=r,p(t),clearInterval(m)),"none"!==n.display_text&&(_=n.use_percentage?n.percent_format(i):n.amount_format(d,l,o),"fill"===n.display_text?t.text(_):"center"===n.display_text&&(a.text(_),s.text(_))),t.attr("aria-valuenow",d),u(i,t)},n.refresh_speed)},n.transition_delay)}});return d});
//# sourceMappingURL=sourcemaps/Progressbar.js.map
