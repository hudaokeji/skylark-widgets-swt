{"version":3,"sources":["Textbox.js"],"names":["define","langx","browser","eventer","noder","geom","$","ui","Widget","Textbox","inherit","klassName","pluginName","_parse","velm","this","_velm","options","multiline","is","value","$chk","prop","disabled","state","set","_create","tagName","attrs","each","name","subtype","type","_elm","_dom","createElement","_init","_sync","self","on","evt","_refresh","updates","undefined","e","disable","overrided","changed"],"mappings":";;;;;;;AAAAA,QACE,sBACA,4BACA,4BACA,0BACA,yBACA,0BACA,OACA,YACA,SAASC,EAAMC,EAAQC,EAAQC,EAAMC,EAAKC,EAAEC,EAAGC,GAG/C,GAKGC,GAAUF,EAAGE,QAAUD,EAAOE,SACjCC,UAAW,UAETC,WAAY,eAMZC,OAAS,WACP,GAAKC,GAAOC,KAAKC,KAGjBD,MAAKE,QAAQC,UAAYJ,EAAKK,GAAG,WAGjC,IAAIC,GAAQC,KAAKC,KAAK,WAClBC,EAAWF,KAAKC,KAAK,WACzBP,MAAKS,MAAMC,IAAI,QAAQL,GACvBL,KAAKS,MAAMC,IAAgBF,IAQ7BG,QAAU,WACR,GAAIC,GAAU,QAAQC,KAClBX,EAAUF,KAAKE,OAEnBhB,GAAM4B,MACJ,OAAQ,aAAc,YAAa,OAAQ,WAAY,MACvD,MAAO,OAAQ,OAAQ,UAAW,cAAe,WAAY,YAC5D,SAAUC,GACXF,EAAME,GAAQb,EAAQa,KAGpBb,EAAQC,YACVS,EAAU,YAERV,EAAQc,UACVH,EAAMI,KAAOf,EAAQc,SAEvBhB,KAAKkB,KAAOlB,KAAKmB,KAAK9B,MAAM+B,cAAcR,EAAQC,IAOpDQ,MAAQ,aAORC,MAAQ,WAEN,GAAIC,GAAOvB,IACXA,MAAKC,MAAMuB,GAAG,SAAU,SAASC,GAC/B,GAAIpB,GAAQkB,EAAKtB,MAAMM,KAAK,QAC5BgB,GAAKd,MAAMC,IAAI,QAAQL,MAI3BqB,SAAW,SAASC,GAChB,GAAIJ,GAAQvB,IAEa4B,UAArBD,EAAe,OACbJ,EAAKtB,MAAMI,UAAYwB,EAAExB,OAC3BkB,EAAKtB,MAAMI,MAAMsB,EAAQtB,OAGDuB,SAAxBD,EAAkB,UACpBJ,EAAKtB,MAAM6B,QAAQH,EAAkB,UAIvC3B,KAAK+B,UAAUC,WAKtB,OAAOtC","file":"../Textbox.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils-dom/browser\",\r\n  \"skylark-utils-dom/eventer\",\r\n  \"skylark-utils-dom/noder\",\r\n  \"skylark-utils-dom/geom\",\r\n  \"skylark-utils-dom/query\",\r\n  \"./ui\",\r\n  \"./Widget\"\r\n],function(langx,browser,eventer,noder,geom,$,ui,Widget){\r\n\r\n\r\n  var SyncAttrs = [\r\n    'rows', 'spellcheck', 'maxLength', 'size', 'readonly', 'min',\r\n    'max', 'step', 'list', 'pattern', 'placeholder', 'required', 'multiple'\r\n  ];\r\n\r\n\tvar Textbox = ui.Textbox = Widget.inherit({\r\n\t\tklassName: \"Textbox\",\r\n\r\n    pluginName: \"lark.textbox\",\r\n\r\n    /*\r\n     * Parse options from attached dom element.\r\n     * @override\r\n     */\r\n    _parse : function() {\r\n      var  velm = this._velm;\r\n\r\n      // get multiline option\r\n      this.options.multiline = velm.is(\"textarea\");\r\n      \r\n      // get current state of input\r\n      var value = $chk.prop('checked');\r\n      var disabled = $chk.prop('disabled');\r\n      this.state.set(\"value\",value);\r\n      this.state.set((\"disabled\",disabled));\r\n\r\n    },\r\n\r\n    /*\r\n     * Create a new  dom element for this widget\r\n     * @override\r\n     */\r\n    _create : function() {\r\n      var tagName = \"input\",attrs = {},\r\n          options = this.options;\r\n\r\n      langx.each([\r\n        'rows', 'spellcheck', 'maxLength', 'size', 'readonly', 'min',\r\n        'max', 'step', 'list', 'pattern', 'placeholder', 'required', 'multiple'\r\n      ], function (name) {\r\n        attrs[name] = options[name];\r\n      });\r\n\r\n      if (options.multiline) {\r\n        tagName = \"textarea\"\r\n      } \r\n      if (options.subtype) {\r\n        attrs.type = options.subtype;\r\n      }\r\n      this._elm = this._dom.noder.createElement(tagName,attrs);\r\n    },\r\n\r\n    /*\r\n     * Init  this widget\r\n     * @override\r\n     */\r\n    _init : function() {\r\n    },\r\n\r\n    /*\r\n     * Sync dom element to widget state \r\n     * @override\r\n     */\r\n    _sync : function() {\r\n      // handle internal events\r\n      var self = this;\r\n      this._velm.on('change', function(evt) {\r\n        var value = self._velm.prop('value');\r\n        self.state.set(\"value\",value);\r\n      });\r\n    },\r\n\r\n    _refresh : function(updates) {\r\n        var self  = this;\r\n\r\n        if (updates[\"value\"] !== undefined) {\r\n          if (self._velm.value() !== e.value) {\r\n            self._velm.value(updates.value);\r\n          }\r\n        }\r\n        if (updates[\"disabled\"] !== undefined) {\r\n          self._velm.disable(updates[\"disabled\"]);\r\n        }\r\n\r\n        // update visual with attribute values from control\r\n        this.overrided(changed);\r\n    },\r\n\r\n  });\r\n\r\n\treturn Textbox;\r\n});\r\n\r\n"]}