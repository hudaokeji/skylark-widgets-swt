{"version":3,"sources":["Uploader.js"],"names":["define","langx","browser","eventer","noder","geom","$","ArrayList","uploader","swt","Widget","FileItem","Stateful","inherit","state","start","this","isPending","get","submit","trigger","cancel","abort","destroy","progress","data","fail","error","done","result","getState","isRunning","isDone","isError","FileItemCollection","item","FileItemWidget","className","options","selectors","fileName","fileSize","clear","message","String","Number","_init","processUploadMsg","doneMsg","model","on","close","updateProgress","hasFailed","hasDone","update","bindEvents","_refresh","updates","percent","parseInt","loaded","total","progressHTML","getHelpers","displaySize","el","find","css","parent","html","when_pending","_velm","size","when_running","when_done","add","addClass","removeClass","_startup","self","click","collection","remove","computeData","extend","Uploader","klassName","pluginName","uploadUrl","autoUpload","fileList","nodata","pickFiles","startUploads","cancelUploads","dataType","fileItem","template","files","filePicker","uploadProcess","_elm","url","formData","singleFileUploads","picker","e","uploadManagerFiles","each","index","file_data","id","file_id","file","processor","push","renderFile","errorThrown","bindProcessEvents","length","at","forEach","with_files_elements","without_files_elements","mixin","attach"],"mappings":"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","file":"../Uploader.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils-dom/browser\",\r\n  \"skylark-utils-dom/eventer\",\r\n  \"skylark-utils-dom/noder\",\r\n  \"skylark-utils-dom/geom\",\r\n  \"skylark-utils-dom/query\",\r\n  \"skylark-data-collection/ArrayList\",\r\n  \"skylark-storages-diskfs/uploader\",\r\n  \"./swt\",\r\n  \"./Widget\"\r\n],function(langx,browser,eventer,noder,geom,$,ArrayList,uploader,swt,Widget){\r\n\r\n    /**\r\n     * This model represents a file.\r\n     *\r\n     */\r\n    var FileItem = langx.Stateful.inherit({\r\n        state: \"pending\",\r\n\r\n        /**\r\n         * Start upload.\r\n         *\r\n         */\r\n        start: function ()  {\r\n            if (this.isPending()) {\r\n                this.get('processor').submit();\r\n                this.state = \"running\";\r\n\r\n                // Dispatch event\r\n                this.trigger('filestarted', this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cancel a file upload.\r\n         *\r\n         */\r\n        cancel: function () {\r\n            this.get('processor').abort();\r\n            this.destroy();\r\n\r\n            // Dispatch event\r\n            this.state = \"canceled\";\r\n            this.trigger('filecanceled', this);\r\n        },\r\n\r\n        /**\r\n         * Notify file that progress updated.\r\n         *\r\n         */\r\n        progress: function (data)  {\r\n            // Dispatch event\r\n            this.trigger('fileprogress', this.get('processor').progress());\r\n        },\r\n\r\n        /**\r\n         * Notify file that upload failed.\r\n         *\r\n         */\r\n        fail: function (error)  {\r\n            // Dispatch event\r\n            this.state = \"error\";\r\n            this.trigger('filefailed', error);\r\n        },\r\n\r\n        /**\r\n         * Notify file that upload is done.\r\n         *\r\n         */\r\n        done: function (result)  {\r\n            // Dispatch event\r\n            this.state = \"error\";\r\n            this.trigger('filedone', result);\r\n        },\r\n\r\n        /**\r\n         * Is this file pending to be uploaded ?\r\n         *\r\n         */\r\n        isPending: function ()  {\r\n            return this.getState() == \"pending\";\r\n        },\r\n\r\n        /**\r\n         * Is this file currently uploading ?\r\n         *\r\n         */\r\n        isRunning: function () {\r\n            return this.getState() == \"running\";\r\n        },\r\n\r\n        /**\r\n         * Is this file uploaded ?\r\n         *\r\n         */\r\n        isDone: function () {\r\n            return this.getState() == \"done\";\r\n        },\r\n\r\n        /**\r\n         * Is this upload in error ?\r\n         *\r\n         */\r\n        isError: function () {\r\n            return this.getState() == \"error\" || this.getState == \"canceled\";\r\n        },\r\n\r\n        /**\r\n         * Get the file state.\r\n         *\r\n         */\r\n        getState: function () {\r\n            return this.state;\r\n        }\r\n    });\r\n\r\n    /**\r\n     * This is a file collection, used to manage the selected\r\n     * and processing files.\r\n     *\r\n     */\r\n    var FileItemCollection = ArrayList.inherit({\r\n        item: FileItem\r\n    });\r\n\r\n    /**\r\n     * A file view, which is the view that manage a single file\r\n     * process in the upload manager.\r\n     *\r\n     */\r\n    var FileItemWidget = Widget.inherit({\r\n        className: 'upload-manager-file row',\r\n\r\n        options : {\r\n          selectors : {\r\n            fileName : \".name\",\r\n            fileSize : \".size\",\r\n            cancel : \".cancel\",\r\n            clear : \".clear\",\r\n            progress : \".progress\",\r\n            message : \".message\"\r\n          }\r\n        },\r\n\r\n        state : {\r\n          fileName : String,\r\n          fileSize : Number\r\n        },\r\n\r\n        _init: function () {\r\n            this.processUploadMsg = this.options.processUploadMsg;\r\n            this.doneMsg = this.options.doneMsg;\r\n\r\n            this.fileName(this.options.fileName);\r\n            this.fileSize(this.options.fileSize);\r\n\r\n            // Bind model events\r\n            this.model.on('destroy', this.close, this);\r\n            this.model.on('fileprogress', this.updateProgress, this);\r\n            this.model.on('filefailed', this.hasFailed, this);\r\n            this.model.on('filedone', this.hasDone, this);\r\n\r\n            // In each case, update view\r\n            this.model.on('all', this.update, this);\r\n\r\n            // Bind events\r\n            this.bindEvents();\r\n\r\n            // Update elements\r\n            this.update();            \r\n        },\r\n\r\n        _refresh : function(updates) {\r\n\r\n        },\r\n\r\n        /**\r\n         * Update upload progress.\r\n         *\r\n         */\r\n        updateProgress: function (progress) {\r\n            var percent = parseInt(progress.loaded / progress.total * 100, 10);\r\n            var progressHTML = this.getHelpers().displaySize(progress.loaded)+' of '+this.getHelpers().displaySize(progress.total);\r\n            if (percent >= 100 && this.processUploadMsg) { progressHTML = this.processUploadMsg; }\r\n\r\n            $('.progress', this.el)\r\n                .find('.bar')\r\n                .css('width', percent+'%')\r\n                .parent()\r\n                .find('.progress-label')\r\n                .html(progressHTML);\r\n        },\r\n\r\n        /**\r\n         * File upload has failed.\r\n         *\r\n         */\r\n        hasFailed: function (error){\r\n            $('.message', this.el).html('<i class=\"icon-error\"></i> '+error);\r\n        },\r\n\r\n        /**\r\n         * File upload is done.\r\n         *\r\n         */\r\n        hasDone: function (result){\r\n            $('.message', this.el).html('<i class=\"icon-success\"></i> ' + (this.doneMsg || 'Uploaded'));\r\n        },\r\n\r\n        /**\r\n         * Update view without complete rendering.\r\n         *\r\n         */\r\n        update: function () {\r\n            var selectors = this.options.selectors,\r\n                when_pending = this._velm.$(selectors.size + \",\" + selectors.cancel),\r\n                when_running = this._velm.$(selectors.progress + \",\" + selectors.cancel),\r\n                when_done = this._velm.$(selectors.message + \",\" + selectors.clear);\r\n\r\n            if (this.model.isPending()) {\r\n                when_running.add(when_done).addClass('hidden');\r\n                when_pending.removeClass('hidden');\r\n            } else if (this.model.isRunning()) {\r\n                when_pending.add(when_done).addClass('hidden');\r\n                when_running.removeClass('hidden');\r\n            } else if (this.model.isDone() || this.model.isError()) {\r\n                when_pending.add(when_running).addClass('hidden');\r\n                when_done.removeClass('hidden');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Startup widget with binding events\r\n         * @override\r\n         *\r\n         */\r\n        _startup: function () {\r\n            var self = this;\r\n\r\n            // DOM events\r\n            this._velm.$(this.options.selectors.cancel).click(function(){\r\n                self.model.cancel();\r\n                self.collection.remove(self.model);\r\n            });\r\n            this._velm.$(this.options.selectors.clear).click(function(){\r\n                self.model.destroy();\r\n                self.collection.remove(self.model);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Compute data to be passed to the view.\r\n         *\r\n         */\r\n        computeData: function () {\r\n            return $.extend(this.getHelpers(), this.model.get('data'));\r\n        }\r\n    });\r\n\r\n\r\n    var Uploader =  Widget.inherit({\r\n        klassName : \"Uploader\",\r\n        pluginName : \"lark.uploader\",\r\n\r\n        options: {\r\n\r\n            uploadUrl: '/upload',\r\n            autoUpload: false,\r\n            selectors : {\r\n              fileList : '.file-list',\r\n              nodata : \".file-list .no-data\",\r\n              pickFiles: '.file-picker',\r\n              startUploads: '.start-uploads',\r\n              cancelUploads: '.cancel-uploads',\r\n            },\r\n\r\n            dataType: 'json',\r\n\r\n            fileItem : {\r\n            \tselectors : {\r\n\r\n            \t},\r\n\r\n            \ttemplate : null\r\n            }\r\n        },\r\n\r\n        state : {\r\n          files : FileItemCollection\r\n        },\r\n\r\n        /**\r\n         * Render the main part of upload manager.\r\n         *\r\n         */\r\n        _init: function () {\r\n            var self = this;\r\n\r\n\r\n            // Create the file list\r\n            var files = this.files(new FileItemCollection());\r\n\r\n            // Add add files handler\r\n            var filePicker = this._velm.$(this.options.selectors.pickFiles), self = this;\r\n\r\n            this.uploadProcess =  uploader(this._elm,{  //$.$(this.el).fileupload({\r\n                dataType: this.options.dataType,\r\n                url: this.options.uploadUrl,\r\n                formData: this.options.formData,\r\n                autoUpload: this.options.autoUpload,\r\n                singleFileUploads: true,\r\n                picker : filePicker,\r\n\r\n                'add' : function (e, data) {\r\n                    // Create an array in which the file objects\r\n                    // will be stored.\r\n                    data.uploadManagerFiles = [];\r\n\r\n                    // A file is added, process for each file.\r\n                    // Note: every times, the data.files array length is 1 because\r\n                    //       of \"singleFileUploads\" option.\r\n                    langx.each(data.files, function (index, file_data) {\r\n                        // Create the file object\r\n                        file_data.id = self.file_id++;\r\n                        var file = new FileItem({\r\n                            data: file_data,\r\n                            processor: data\r\n                        });\r\n\r\n                        // Add file in data\r\n                        data.uploadManagerFiles.push(file);\r\n\r\n                        // Trigger event\r\n                        //self.trigger('fileadd', file);\r\n                        // Add it to current list\r\n                        self.files.add(file);\r\n\r\n                        // Create the view\r\n                        self.renderFile(file);\r\n\r\n\r\n                    });\r\n                },\r\n                'progress' : function (e, data) {\r\n                    langx.each(data.uploadManagerFiles, function (index, file) {\r\n                        //self.trigger('fileprogress', file, data);\r\n\r\n                        file.progress(progress);\r\n                    });\r\n                },\r\n\r\n                'fail' : function (e, data) {\r\n                    langx.each(data.uploadManagerFiles, function (index, file) {\r\n                        var error = \"Unknown error\";\r\n                        if (typeof data.errorThrown == \"string\") {\r\n                            error = data.errorThrown;\r\n                        } else if (typeof data.errorThrown == \"object\") {\r\n                            error = data.errorThrown.message;\r\n                        } else if (data.result) {\r\n                            if (data.result.error) {\r\n                                error = data.result.error;\r\n                            } else if (data.result.files && data.result.files[index] && data.result.files[index].error) {\r\n                                error = data.result.files[index].error;\r\n                            } else {\r\n                                error = \"Unknown remote error\";\r\n                            }\r\n                        }\r\n\r\n                        //self.trigger('filefail', file, error);\r\n                        file.fail(error);\r\n                    });\r\n                },\r\n\r\n                'done' : function (e, data) {\r\n                    langx.each(data.uploadManagerFiles, function (index, file) {\r\n                        //self.trigger('filedone', file, data);\r\n                        file.done(data.result);\r\n                    });\r\n                }\r\n\r\n            });\r\n\r\n            // Add upload process events handlers\r\n            this.bindProcessEvents();\r\n\r\n            // Add cancel all handler\r\n            this._velm.$(this.options.selectors.cancelUploads).click(function(){\r\n                while (self.files.length) {\r\n                    self.files.at(0).cancel();\r\n                }\r\n            });\r\n\r\n            // Add start uploads handler\r\n            this._velm.$(this.options.selectors.startUploads).click(function(){\r\n                self.files.forEach(function(file){\r\n                    file.start();\r\n                });\r\n            });\r\n\r\n            // Render current files\r\n            /*\r\n            this.files.forEach(function (file) {\r\n                self.renderFile(file);\r\n            });\r\n            */\r\n\r\n            this._refresh({files:true});\r\n        \r\n        },\r\n\r\n        _refresh : function(updates) {\r\n            var self = this;\r\n            function updateFileList()  {\r\n                var selectors = self.options.selectors,\r\n                    files = self.files();\r\n                var with_files_elements = self._velm.$(selectors.cancelUploads + ',' + selectors.startUploads);\r\n                var without_files_elements = self._velm.$(selectors.nodata);\r\n                if (files.length > 0) {\r\n                    with_files_elements.removeClass('hidden');\r\n                    without_files_elements.addClass('hidden');\r\n                } else {\r\n                    with_files_elements.addClass('hidden');\r\n                    without_files_elements.removeClass('hidden');\r\n                }\r\n            }\r\n\r\n            if (updates[\"files\"]) {\r\n              updateFileList();\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Render a file.\r\n         *\r\n         */\r\n        renderFile: function (file) {\r\n            var file_view = new FileItemWidget(langx.mixin({},this.options, {\r\n              model: file,\r\n              template : this.options.fileItem.template\r\n            }));\r\n            //this._velm.$(this.options.selectors.fileList).append(file_view.render());\r\n            file_view.attach(this._velm.$(this.options.selectors.fileList));\r\n        },\r\n\r\n        /**\r\n         * Bind events on the upload processor.\r\n         *\r\n         */\r\n        bindProcessEvents: function () {\r\n        }\r\n    });\r\n\r\n    return swt.Uploader = Uploader;\r\n});\r\n"]}