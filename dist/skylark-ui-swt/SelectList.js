/**
 * skylark-ui-swt - The skylark widget framework and standard widgets
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-swt/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/query","./swt","./Widget","skylark-bootstrap3/dropdown"],function(e,t,i,s,l,n,d,o){var a=o.inherit({klassName:"SelectList",pluginName:"lark.selectlist",options:{emptyLabelHTML:'<li data-value=""><a href="#">No items</a></li>'},_init:function(){this.$element=n(this._elm),this.$button=this.$element.find(".btn.dropdown-toggle"),this.$hiddenField=this.$element.find(".hidden-field"),this.$label=this.$element.find(".selected-label"),this.$dropdownMenu=this.$element.find(".dropdown-menu"),this.$button.dropdown(),this.$element.on("click.fu.selectlist",".dropdown-menu a",e.proxy(this.itemClicked,this)),this.setDefaultSelection(),"auto"!==this.options.resize&&"auto"!==this.$element.attr("data-resize")||this.resize(),0===this.$dropdownMenu.children("li").length&&(this.disable(),this.doSelect(n(this.options.emptyLabelHTML))),this.$element.on("shown.bs.dropdown",function(){var e=n(this);n(document).on("keypress.fu.selectlist",function(t){var i=String.fromCharCode(t.which);e.find("li").each(function(e,t){if(n(t).text().charAt(0).toLowerCase()===i)return n(t).children("a").focus(),!1})})}),this.$element.on("hide.bs.dropdown",function(){n(document).off("keypress.fu.selectlist")})},destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(e){var t;this.$selectedItem=t=e,this.$hiddenField.val(this.$selectedItem.attr("data-value")),this.$label.html(n(this.$selectedItem.children()[0]).html()),this.$element.find("li").each(function(){t.is(n(this))?n(this).attr("data-selected",!0):n(this).removeData("selected").removeAttr("data-selected")})},itemClicked:function(e){this.$element.trigger("clicked.fu.selectlist",this.$selectedItem),e.preventDefault(),n(e.currentTarget).parent("li").is(".disabled, :disabled")||(n(e.target).parent().is(this.$selectedItem)||this.itemChanged(e),this.$element.find(".dropdown-toggle").focus())},itemChanged:function(e){this.doSelect(n(e.target).closest("li"));var t=this.selectedItem();this.$element.trigger("changed.fu.selectlist",t)},resize:function(){var e=0,t=0,i=n("<div/>").addClass("selectlist-sizer");Boolean(n(document).find("html").hasClass("fuelux"))?n(document.body).append(i):n(".fuelux:first").append(i),i.append(this.$element.clone()),this.$element.find("a").each(function(){i.find(".selected-label").text(n(this).text()),t=i.find(".selectlist").outerWidth(),(t+=i.find(".sr-only").outerWidth())>e&&(e=t)}),e<=1||(this.$button.css("width",e),this.$dropdownMenu.css("width",e),i.remove())},selectedItem:function(){var t=this.$selectedItem.text();return e.mixin({text:t},this.$selectedItem.data())},selectByText:function(e){var t=n([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||n(this).text()||"").toLowerCase()===(e||"").toLowerCase())return t=n(this),!1}),this.doSelect(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.doSelect(t)},setDefaultSelection:function(){var e=this.$element.find("li[data-selected=true]").eq(0);0===e.length&&(e=this.$element.find("li").has("a").eq(0)),this.doSelect(e)},enable:function(){this.$element.removeClass("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$button.addClass("disabled")}});return a.prototype.getValue=a.prototype.selectedItem,d.SelectList=a});
//# sourceMappingURL=sourcemaps/SelectList.js.map
