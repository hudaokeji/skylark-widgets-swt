{"version":3,"sources":["Toolbar.js"],"names":["define","langx","browser","eventer","noder","geom","$","swt","Widget","Toolbar","inherit","klassName","pluginName","init","elm","options","this","_options","mixin","autoredraw","buttons","context","list","show","$container","$el","append","on","e","dropdown","render","createToolbarItems","items","container","each","i","item","type","group","class","role","createButtonGroup","button","attrs","icon","text","attr","createButton","dropdown_group","dropdown_button","dropdown_list","addClass","dropdown_option","dropdown_option_li","createDrop","input_group","input_element","input_prefix","html","prefix","input_sufix","sufix","inputType","createInput","fn","toolbar"],"mappings":"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","file":"../Toolbar.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils-dom/browser\",\r\n  \"skylark-utils-dom/eventer\",\r\n  \"skylark-utils-dom/noder\",\r\n  \"skylark-utils-dom/geom\",\r\n  \"skylark-utils-dom/query\",\r\n  \"./swt\",\r\n  \"./Widget\"\r\n],function(langx,browser,eventer,noder,geom,$,swt,Widget){\r\n\r\n\tvar Toolbar = swt.Toolbar = Widget.inherit({\r\n        klassName: \"Toolbar\",\r\n\r\n\t    pluginName : \"lark.toolbar\",\r\n\r\n        init : function(elm,options) {\r\n\t\t\tvar self = this;\r\n\t\t\tthis._options = langx.mixin({\r\n\t\t\t\t\tautoredraw: true,\r\n\t\t\t\t\tbuttons: {},\r\n\t\t\t\t\tcontext: {},\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tshow: true,\r\n\t\t\t},options);\r\n\r\n\r\n\t\t\tthis.$container = $('<nav class=\"navbar\"/>');\r\n\t\t\tthis.$el = $(elm).append(this.$container);\r\n\r\n\t\t\tthis.$container.on('mousedown.bs.dropdown.data-api', '[data-toggle=\"dropdown\"]',function(e) {\r\n\t\t\t\t$(this).dropdown();\r\n\t\t\t}); \r\n\r\n\t\t\tthis.render();\r\n        },\r\n\r\n\r\n\t\trender : function () {\r\n\t\t\tfunction createToolbarItems(items,container) {\r\n\t\t\t\tlangx.each(items,function(i,item)  {\r\n\t\t\t\t\tvar type = item.type;\r\n\t\t\t\t\tif (!type) {\r\n\t\t\t\t\t\ttype = \"button\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase \"buttongroup\":\r\n\t\t\t\t\t\t\t// Create an element with the HTML\r\n\t\t\t\t\t\t\tcreateButtonGroup(item,container);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\t\t\tcreateButton(item,container)\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"dropdown\":\r\n\t\t\t\t\t\tcase \"dropup\":\r\n\t\t\t\t\t\t\tcreateDrop(item,container)\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"input\":\r\n\t\t\t\t\t\t\tcreateInput(item,container)\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthrow \"Wrong widget button type\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction createButtonGroup(item,container) {\r\n\t\t\t\tvar  group = $(\"<div/>\", { class: \"btn-group\", role: \"group\" });\r\n\t\t\t\tcontainer.append(group);\r\n\t\t\t\tcreateToolbarItems(item.items,group);\r\n\t\t\t\treturn group;\r\n\t\t\t}\r\n\r\n\t\t\tfunction createButton(item,container) {\r\n\t\t\t\t// Create button\r\n\t\t\t\tvar button = $('<button type=\"button\" class=\"btn btn-default\"/>'),\r\n\t\t\t\t\tattrs = langx.mixin({},item);\r\n\r\n\t\t\t\t// If has icon\r\n\t\t\t\tif (\"icon\" in item) {\r\n\t\t\t\t\tbutton.append($(\"<span/>\", { class: item.icon }));\r\n\t\t\t\t\tdelete attrs.icon;\r\n\t\t\t\t}\r\n\t\t\t\t// If has text\r\n\t\t\t\tif (\"text\" in attrs) {\r\n\t\t\t\t\tbutton.append(\" \" + item.text);\r\n\t\t\t\t\tdelete attrs.text;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbutton.attr(attrs);\r\n\r\n\t\t\t\t// Add button to the group\r\n\t\t\t\tcontainer.append(button);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction createDrop(item,container) {\r\n\t\t\t\t// Create button\r\n\t\t\t\tvar dropdown_group = $('<div class=\"btn-group\" role=\"group\"/>');\r\n\t\t\t\tvar dropdown_button = $('<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"/>');\r\n\t\t\t\tvar dropdown_list = $('<ul class=\"dropdown-menu\"/>');\r\n\r\n\t\t\t\tvar\tattrs = langx.mixin({},item);\r\n\r\n\t\t\t\tif(item.type === \"dropup\") {\r\n\t\t\t\t\tdropdown_group.addClass(\"dropup\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If has icon\r\n\t\t\t\tif (\"icon\" in item) {\r\n\t\t\t\t\tdropdown_button.append($(\"<span/>\", { class: item.icon }));\r\n\t\t\t\t\tdelete attrs.icon;\r\n\t\t\t\t}\r\n\t\t\t\t// If has text\r\n\t\t\t\tif (\"text\" in item) {\r\n\t\t\t\t\tdropdown_button.append(\" \" + item.text);\r\n\t\t\t\t\tdelete attrs.text;\r\n\t\t\t\t}\r\n\t\t\t\t// Add caret\r\n\t\t\t\tdropdown_button.append(' <span class=\"caret\"/>');\r\n\r\n\t\t\t\t// Add list of options\r\n\t\t\t\tfor(var i in item.list) {\r\n\t\t\t\t\tvar dropdown_option = item.list[i];\r\n\t\t\t\t\tvar dropdown_option_li = $('<li/>');\r\n\r\n\t\t\t\t\t// If has icon\r\n\t\t\t\t\tif (\"icon\" in dropdown_option) {\r\n\t\t\t\t\t\tdropdown_option_li.append($(\"<span/>\", { class: dropdown_option.icon }));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// If has text\r\n\t\t\t\t\tif (\"text\" in dropdown_option) {\r\n\t\t\t\t\t\tdropdown_option_li.append(\" \" + dropdown_option.text);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Set attributes\r\n\t\t\t\t\tdropdown_option_li.attr(dropdown_option);\r\n\r\n\t\t\t\t\t// Add to dropdown list\r\n\t\t\t\t\tdropdown_list.append(dropdown_option_li);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Set attributes\r\n\t\t\t\tdropdown_group.attr(attrs);\r\n\r\n\t\t\t\tdropdown_group.append(dropdown_button);\r\n\t\t\t\tdropdown_group.append(dropdown_list);\r\n\t\t\t\tcontainer.append(dropdown_group);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction createInput(item,container) {\r\n\t\t\t\tvar input_group = $('<div class=\"input-group\"/>');\r\n\t\t\t\tvar input_element = $('<input class=\"form-control\"/>');\r\n\t\t\t\t\r\n\t\t\t\tvar\tattrs = langx.mixin({},item);\r\n\r\n\t\t\t\t// Add prefix addon\r\n\t\t\t\tif(\"prefix\" in item) {\r\n\t\t\t\t\tvar input_prefix = $('<span class=\"input-group-addon\"/>');\r\n\t\t\t\t\tinput_prefix.html(item.prefix);\r\n\t\t\t\t\tinput_group.append(input_prefix);\r\n\r\n\t\t\t\t\tdelete attrs.prefix;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Add input\r\n\t\t\t\tinput_group.append(input_element);\r\n\r\n\t\t\t\t// Add sufix addon\r\n\t\t\t\tif(\"sufix\" in item) {\r\n\t\t\t\t\tvar input_sufix = $('<span class=\"input-group-addon\"/>');\r\n\t\t\t\t\tinput_sufix.html(item.sufix);\r\n\t\t\t\t\tinput_group.append(input_sufix);\r\n\r\n\t\t\t\t\tdelete attrs.sufix;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs.type = attrs.inputType;\r\n\r\n\t\t\t\tdelete attrs.inputType;\r\n\r\n\t\t\t\t// Set attributes\r\n\t\t\t\tinput_element.attr(attrs);\r\n\r\n\t\t\t\tcontainer.append(input_group);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar items = this._options.items;\r\n\t\t\tif (items) {\r\n\t\t\t\tcreateToolbarItems(items,this.$container);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\t$.fn.toolbar = function (options) {\r\n\t\toptions = options || {};\r\n\r\n\t\treturn this.each(function () {\r\n\t\t\treturn new Toolbar(this, langx.mixin({}, options,true));\r\n\t\t});\r\n\t};\r\n\r\n\treturn Toolbar;\r\n\r\n});\r\n"]}